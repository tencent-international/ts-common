# è‡ªåŠ¨åŒ–å‘å¸ƒæŒ‡å—

## ğŸš€ å‘å¸ƒæµç¨‹

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions å®ç°è‡ªåŠ¨åŒ–å‘å¸ƒã€‚å½“ PR åˆå¹¶åˆ° `main` åˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘å‘å¸ƒæµç¨‹ã€‚

## ğŸ“‹ å‘å¸ƒæ£€æŸ¥æ¸…å•

### PR åˆ›å»ºæ—¶
- âœ… TypeScript ç±»å‹æ£€æŸ¥
- âœ… ESLint ä»£ç æ£€æŸ¥  
- âœ… æ„å»ºæµ‹è¯•
- âœ… æ„å»ºæ–‡ä»¶éªŒè¯

### PR åˆå¹¶æ—¶
- âœ… è‡ªåŠ¨ç‰ˆæœ¬å·å‡çº§ (patch)
- âœ… å‘å¸ƒåˆ° GitHub Packages
- âœ… åˆ›å»º Git æ ‡ç­¾
- âœ… åˆ›å»º GitHub Release
- âœ… åœ¨ PR ä¸­è¯„è®ºå‘å¸ƒç»“æœ

## ğŸ”¢ ç‰ˆæœ¬å·ç®¡ç†ç­–ç•¥

### è‡ªåŠ¨ç‰ˆæœ¬å‡çº§
- **æ¯æ¬¡åˆå¹¶ PR æ—¶è‡ªåŠ¨å‡çº§ patch ç‰ˆæœ¬**
- ä¾‹å¦‚ï¼š`1.2.3` â†’ `1.2.4`

### æ‰‹åŠ¨ç‰ˆæœ¬å‡çº§
å¯¹äº major å’Œ minor ç‰ˆæœ¬å‡çº§ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹ `package.json`ï¼š

```json
{
  "version": "1.3.0"  // æ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å·
}
```

### ç‰ˆæœ¬å‡çº§ç±»å‹

| å‡çº§ç±»å‹ | ç¤ºä¾‹ | æ“ä½œæ–¹å¼ |
|----------|------|----------|
| **Patch** | `1.2.3` â†’ `1.2.4` | è‡ªåŠ¨å‡çº§ |
| **Minor** | `1.2.3` â†’ `1.3.0` | æ‰‹åŠ¨ä¿®æ”¹ package.json |
| **Major** | `1.2.3` â†’ `2.0.0` | æ‰‹åŠ¨ä¿®æ”¹ package.json |

## ğŸ“ PR æ ‡é¢˜ç¤ºä¾‹

```
feat: add new dictionary functionality  # è‡ªåŠ¨ patch å‡çº§
fix: resolve event bus memory leak      # è‡ªåŠ¨ patch å‡çº§
docs: update README                     # è‡ªåŠ¨ patch å‡çº§
```

## ğŸ”§ æ‰‹åŠ¨ç‰ˆæœ¬å‡çº§æ­¥éª¤

å¦‚æœéœ€è¦å‡çº§ minor æˆ– major ç‰ˆæœ¬ï¼š

1. **ä¿®æ”¹ package.json**ï¼š
   ```json
   {
     "version": "1.3.0"  // æ‰‹åŠ¨è®¾ç½®æ–°ç‰ˆæœ¬
   }
   ```

2. **æäº¤ç‰ˆæœ¬æ›´æ–°**ï¼š
   ```bash
   git add package.json
   git commit -m "chore: bump version to 1.3.0"
   git push origin main
   ```

3. **åˆ›å»º PR å¹¶åˆå¹¶** â†’ è‡ªåŠ¨å‘å¸ƒ

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥
- âœ… **npm ç¼“å­˜**ï¼šä½¿ç”¨ GitHub Actions çš„ npm ç¼“å­˜
- âœ… **å¿«é€Ÿå®‰è£…**ï¼šä½¿ç”¨ `npm ci` è€Œä¸æ˜¯ `npm install`
- âœ… **ä¾èµ–å¤ç”¨**ï¼šé¿å…é‡å¤å®‰è£…ä¾èµ–

### æ„å»ºæ—¶é—´ä¼˜åŒ–
- ä¾èµ–å®‰è£…æ—¶é—´å‡å°‘çº¦ 60-80%
- æ€»æ„å»ºæ—¶é—´æ˜¾è‘—æå‡

## ğŸ”§ æ‰‹åŠ¨å‘å¸ƒ

å¦‚æœéœ€è¦æ‰‹åŠ¨å‘å¸ƒï¼Œå¯ä»¥ï¼š

1. ç›´æ¥æ¨é€åˆ° main åˆ†æ”¯
2. æˆ–è€…ä½¿ç”¨ GitHub CLIï¼š
   ```bash
   gh workflow run release.yml
   ```

## ğŸ› æ•…éšœæ’é™¤

### npm ä¾èµ–é—®é¢˜
å¦‚æœé‡åˆ° `@rollup/rollup-linux-x64-gnu` æ¨¡å—æ‰¾ä¸åˆ°çš„é”™è¯¯ï¼Œè¿™æ˜¯ npm çš„å·²çŸ¥ bugã€‚è§£å†³æ–¹æ³•ï¼š

```bash
# æ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules package-lock.json
npm install
```

GitHub Actions ä¼šè‡ªåŠ¨å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚

## ğŸ“¦ åŒ…ä¿¡æ¯

- **åŒ…å**: `@tencent-international/ts-common`
- **æ³¨å†Œè¡¨**: GitHub Packages
- **å®‰è£…**: `npm install @tencent-international/ts-common`

## ğŸ” å‘å¸ƒçŠ¶æ€

å‘å¸ƒå®Œæˆåï¼Œä½ å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹ç»“æœï¼š

1. **GitHub Packages**: https://npm.pkg.github.com
2. **GitHub Releases**: ä»“åº“çš„ Releases é¡µé¢
3. **PR è¯„è®º**: è‡ªåŠ¨å‘å¸ƒçš„è¯„è®ºä¿¡æ¯

## âš ï¸ æ³¨æ„äº‹é¡¹

- æ¯æ¬¡åˆå¹¶ PR ä¼šè‡ªåŠ¨å‡çº§ patch ç‰ˆæœ¬
- major/minor ç‰ˆæœ¬éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ package.json
- ç¡®ä¿ PR æ ‡é¢˜æ¸…æ™°æè¿°å˜æ›´å†…å®¹
- å¦‚æœé‡åˆ°æ„å»ºé”™è¯¯ï¼Œæ£€æŸ¥æ˜¯å¦ä¸ npm ä¾èµ–é—®é¢˜ç›¸å…³ 